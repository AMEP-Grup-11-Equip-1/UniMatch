<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chats - Unimatch</title>
    <link rel="icon" href="img1.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="chats.css">
    <link rel="stylesheet" href="../Menu/menu.css">
</head>

<body>
    <span class="menu-icon" onclick="openMenu()">&#9776;</span>
    <div id="sideMenu" class="side-menu">
        <span class="close-btn" onclick="closeMenu()">&times;</span>
        <a href="../Pantalla%20Inicio/bienvenida.html">Inicio</a>
        <a href="../Pantalla%20Perfil/perfil.php">Perfil</a>
        <a href="../Pantalla%20Chat/chat.html">Chats</a>
        <a href="../Pantalla%20Config/configuracion.html">Configuraciones</a>
        <a href="../Pantalla%20Ayuda/ayuda.html">Ayuda</a>
        <button class="logout-btn-side" onclick="window.location.href='../Pantalla%20de%20Bloqueo/Pantalladebloqueo.html'">Cerrar sesión</button>
    </div>

    <div class="chat-container">
        <div class="chat-list">
            <div class="section-title">Matchs</div>
            <!-- Aquí podrías cargar dinámicamente los contactos -->
        </div>

        <div class="chat-box">
            <h2>Conversación</h2>
            <div class="messages" id="messagesContainer"></div>
            <div class="message-input">
                <input type="text" id="message" placeholder="Escribe un mensaje...">
                <button onclick="sendMessage()">Enviar</button>
            </div>
        </div>
    </div>

    <script>
        function openMenu() {
            document.getElementById('sideMenu').style.width = '250px';
        }

        function closeMenu() {
            document.getElementById('sideMenu').style.width = '0';
        }

        const ws = new WebSocket("ws://localhost:8080");
        const messagesContainer = document.getElementById("messagesContainer");
        const messageInput = document.getElementById("message");

        ws.onmessage = function(event) {
            const messageElement = document.createElement("p");
            messageElement.textContent = event.data;
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        };

        function sendMessage() {
            const message = messageInput.value.trim();
            if (message) {
                ws.send(message);
                messageInput.value = "";
            }
        }
    </script>
</body>

</html>